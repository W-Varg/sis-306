{% extends "a_publico/punto_luz_base.html" %}

{% block title %}
    PuntoLuzs
{% endblock %}

{% block content %}
    <h1>PuntoLuzs</h1>
    <h2><a href={% url "a_publico:punto_luz_create" %}>Crear  ahora PuntoLuz</a></h2>
    <script>
    var latitudes = [];
    var longitudes = [];
    </script>
    <div class="p-3 my-3 rounded shadow-sm row">
    
    <div id="map" style="height:400px; background-color: grey;" class="col"></div>
    
    </div>
    <ul>
    {% for punto_luz in punto_luz_list %}
        <li><a href={% url "a_publico:punto_luz_detail" punto_luz.pk %}>{{ punto_luz }}</a> | <a href={% url "a_publico:punto_luz_update" punto_luz.pk %}>Actualizar</a> | <form style="display:inline;" action={% url "a_publico:punto_luz_delete" punto_luz.pk %} method="post" onsubmit="return confirm('Are you sure you want to delete {{ punto_luz }}?')">{% csrf_token %}
    <input type="submit" value="Eliminar" />
    </form></li>
    <script>
        latitudes.push('{{ punto_luz.lat }}');
        longitudes.push('{{punto_luz.lng}}');
    </script>
    {% empty %}
        <li>No PuntoLuzs yet.</li>
    {% endfor %}
    </ul>
    <script>
    function initMap() {
        var uluru= {lat: -19.0372347, lng: -65.2314347}
        var map = new google.maps.Map(document.getElementById('map'),
        {
            center: uluru,
            zoom: 13
        });

        var lugar = {};
        for (let i = 0; i < longitudes.length; i++) {
            var la = latitudes[i].replace(',','.')*1;
            var ln = longitudes[i].replace(',','.')*1;
            
            lugar = {lat: la, lng: ln};
            // console.log(lugar);
            var marker = new google.maps.Marker({position: lugar, map: map});
        }
    }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDBE-H3YEkKAyBg5qUw5V-gY8AqADD5CEQ&callback=initMap" async defer></script>      
{% endblock %}

